[{"/home/jonnie/React App/E Commerce/ecommerceapp/src/index.js":"1","/home/jonnie/React App/E Commerce/ecommerceapp/src/App.js":"2","/home/jonnie/React App/E Commerce/ecommerceapp/src/reportWebVitals.js":"3","/home/jonnie/React App/E Commerce/ecommerceapp/src/Context.js":"4","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/AddProduct.js":"5","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/Cart.js":"6","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/Login.js":"7","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/ProductList.js":"8","/home/jonnie/React App/E Commerce/ecommerceapp/src/withContext.js":"9","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/ProductItem.js":"10","/home/jonnie/React App/E Commerce/ecommerceapp/src/components/CartItem.js":"11"},{"size":529,"mtime":1615287396278,"results":"12","hashOfConfig":"13"},{"size":6322,"mtime":1615645691058,"results":"14","hashOfConfig":"13"},{"size":362,"mtime":1615279386321,"results":"15","hashOfConfig":"13"},{"size":91,"mtime":1615287640030,"results":"16","hashOfConfig":"13"},{"size":4318,"mtime":1615559450673,"results":"17","hashOfConfig":"13"},{"size":1559,"mtime":1615560156247,"results":"18","hashOfConfig":"13"},{"size":2283,"mtime":1615558557390,"results":"19","hashOfConfig":"13"},{"size":1013,"mtime":1615559310173,"results":"20","hashOfConfig":"13"},{"size":292,"mtime":1615287716034,"results":"21","hashOfConfig":"13"},{"size":1462,"mtime":1615362027469,"results":"22","hashOfConfig":"13"},{"size":1112,"mtime":1615560272532,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"4znz4v",{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"/home/jonnie/React App/E Commerce/ecommerceapp/src/index.js",[],["48","49"],"/home/jonnie/React App/E Commerce/ecommerceapp/src/App.js",["50","51"],"import React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\n\nimport AddProduct from './components/AddProduct';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\n\nimport Context from \"./Context\";\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    };\n    this.routerRef = React.createRef();\n  }\n  checkout = () => {\n    if (!this.state.user) {\n      this.routerRef.current.history.push(\"/login\");\n      return;\n    }\n  \n    const cart = this.state.cart;\n  \n    const products = this.state.products.map(p => {\n      if (cart[p.name]) {\n        p.stock = p.stock - cart[p.name].amount;\n  \n        axios.put(\n          `http://localhost:3001/products/${p.id}`,\n          { ...p },\n        )\n      }\n      return p;\n    });\n  \n    this.setState({ products });\n    this.clearCart();\n  };\n  addProduct = (product, callback) => {\n    let products = this.state.products.slice();\n    products.push(product);\n    this.setState({ products }, () => callback && callback());\n  };\n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    let cart = localStorage.getItem(\"cart\");\n  \n    const products = await axios.get('http://localhost:3001/products');\n    user = user ? JSON.parse(user) : null;\n    cart = cart? JSON.parse(cart) : {};\n  \n    this.setState({ user,  products: products.data, cart });\n  }\n  addToCart = cartItem => {\n    let cart = this.state.cart;\n    if (cart[cartItem.id]) {\n      cart[cartItem.id].amount += cartItem.amount;\n    } else {\n      cart[cartItem.id] = cartItem;\n    }\n    if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n      cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n    }\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    this.setState({ cart });\n  };\n  removeFromCart = cartItemId => {\n    let cart = this.state.cart;\n    delete cart[cartItemId];\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    this.setState({ cart });\n  };\n  \n  clearCart = () => {\n    let cart = {};\n    localStorage.removeItem(\"cart\");\n    this.setState({ cart });\n  };\n    \n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    const products = await axios.get('http://localhost:3001/products');\n    user = user ? JSON.parse(user) : null;\n    this.setState({ user,  products: products.data });\n  }\n  \n  componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    user = user ? JSON.parse(user) : null;\n    this.setState({ user });\n  }\n  login = async (email, password) => {\n    const res = await axios.post(\n      'http://localhost:3001/login',\n      { email, password },\n    ).catch((res) => {\n      return { status: 401, message: 'Unauthorized' }\n    })\n  \n    if(res.status === 200) {\n      const { email } = jwt_decode(res.data.accessToken)\n      const user = {\n        email,\n        token: res.data.accessToken,\n        accessLevel: email === 'admin@example.com' ? 0 : 1\n      }\n  \n      this.setState({ user });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  logout = e => {\n    e.preventDefault();\n    this.setState({ user: null });\n    localStorage.removeItem(\"user\");\n  };\n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          ...this.state,\n          removeFromCart: this.removeFromCart,\n          addToCart: this.addToCart,\n          login: this.login,\n          addProduct: this.addProduct,\n          clearCart: this.clearCart,\n          checkout: this.checkout\n        }}\n      >\n        <Router ref={this.routerRef}>\n        <div className=\"App\">\n          <nav\n            className=\"navbar container\"\n            role=\"navigation\"\n            aria-label=\"main navigation\"\n          >\n            <div className=\"navbar-brand\">\n              <b className=\"navbar-item is-size-4 \">NEW WORLD ENTERPRISE</b>\n              <label\n                role=\"button\"\n                class=\"navbar-burger burger\"\n                aria-label=\"menu\"\n                aria-expanded=\"false\"\n                data-target=\"navbarBasicExample\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ showMenu: !this.state.showMenu });\n                }}\n              >\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n              </label>\n            </div>\n              <div className={`navbar-menu ${\n                  this.state.showMenu ? \"is-active\" : \"\"\n                }`}>\n                <Link to=\"/products\" className=\"navbar-item\">\n                  Products\n                </Link>\n                {this.state.user && this.state.user.accessLevel < 1 && (\n                  <Link to=\"/add-product\" className=\"navbar-item\">\n                    Add Product\n                  </Link>\n                )}\n                <Link to=\"/cart\" className=\"navbar-item\">\n                  Cart\n                  <span\n                    className=\"tag is-primary\"\n                    style={{ marginLeft: \"5px\" }}\n                  >\n                    { Object.keys(this.state.cart).length }\n                  </span>\n                </Link>\n                {!this.state.user ? (\n                  <Link to=\"/login\" className=\"navbar-item\">\n                    Login\n                  </Link>\n                ) : (\n                  <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\n                    Logout\n                  </Link>\n                )}\n              </div>\n            </nav>\n            <Switch>\n              <Route exact path=\"/\" component={ProductList} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/cart\" component={Cart} />\n              <Route exact path=\"/add-product\" component={AddProduct} />\n              <Route exact path=\"/products\" component={ProductList} />\n            </Switch>\n          </div>\n        </Router>\n      </Context.Provider>\n    );\n  }\n}","/home/jonnie/React App/E Commerce/ecommerceapp/src/reportWebVitals.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/Context.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/AddProduct.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/Cart.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/Login.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/ProductList.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/withContext.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/ProductItem.js",[],"/home/jonnie/React App/E Commerce/ecommerceapp/src/components/CartItem.js",[],{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":87,"column":3,"nodeType":"58","messageId":"59","endLine":92,"endColumn":4},{"ruleId":"56","severity":1,"message":"57","line":94,"column":3,"nodeType":"58","messageId":"59","endLine":98,"endColumn":4},"no-native-reassign",["60"],"no-negated-in-lhs",["61"],"no-dupe-class-members","Duplicate name 'componentDidMount'.","MethodDefinition","unexpected","no-global-assign","no-unsafe-negation"]